<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© - Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© HZ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-gold: #FFD700;
            --deep-purple: #2c145a;
            --accent-green: #2ecc71;
            --accent-red: #e74c3c;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --transition-speed: 0.3s;
        }

        /* RESET & BASE */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif; }
        body {
            background: radial-gradient(circle at top, #2c145a 0%, #050010 85%, #000 100%);
            overflow-x: hidden;
            min-height: 100vh;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* LOGO */
        .site-logo {
            position: fixed; top: 20px; left: 20px; z-index: 9999;
            width: 80px; height: 80px; border-radius: 15px;
            overflow: hidden; box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            border: 2px solid var(--primary-gold);
            transition: var(--transition-speed);
        }
        .site-logo:hover { transform: scale(1.1) rotate(-5deg); }
        .site-logo img { width: 100%; height: 100%; object-fit: cover; }

        /* ATMOSPHERE */
        .stars {
            position: fixed; inset: 0; pointer-events: none;
            background-image: 
                radial-gradient(2px 2px at 20% 30%, #fff, transparent),
                radial-gradient(1.5px 1.5px at 70% 10%, #fff, transparent),
                radial-gradient(2px 2px at 50% 80%, #fff, transparent);
            animation: twinkle 4s infinite alternate;
        }
        @keyframes twinkle { from { opacity: 0.3; } to { opacity: 0.8; } }

        .lantern { position: fixed; width: 100px; opacity: 0.8; animation: float 6s ease-in-out infinite; pointer-events: none; z-index: 1; }
        .lan-1 { left: 5%; top: 10%; }
        .lan-2 { right: 5%; top: 15%; animation-delay: 2s; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

        /* CARDS */
        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 24px;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            z-index: 10;
            display: none; /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ ÙˆÙŠØ¸Ù‡Ø± Ø¹Ø¨Ø± Ø§Ù„Ù€ JS */
            animation: slideUp 0.5s ease-out;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        /* PROGRESS BAR */
        .progress-container {
            width: 100%; height: 8px; background: rgba(255,255,255,0.1);
            border-radius: 10px; margin-bottom: 20px; overflow: hidden;
        }
        #progressBar {
            width: 0%; height: 100%; background: var(--primary-gold);
            transition: width 0.4s ease;
        }

        /* INPUTS & BUTTONS */
        input {
            width: 100%; padding: 15px; border-radius: 12px; border: none;
            background: rgba(255,255,255,0.9); margin: 20px 0;
            font-size: 1.1rem; text-align: center; color: #333;
        }
        .btn {
            padding: 15px 35px; border-radius: 50px; border: none;
            cursor: pointer; font-weight: 700; font-size: 1.1rem;
            transition: all 0.2s; display: inline-block;
        }
        .btn-gold { background: var(--primary-gold); color: var(--deep-purple); }
        .btn-gold:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(255,215,0,0.3); }

        .choice-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 25px; }
        .btn-choice { padding: 20px; border-radius: 15px; color: #fff; font-size: 1.2rem; }
        .btn-true { background: var(--accent-green); }
        .btn-false { background: var(--accent-red); }

        /* FEEDBACK */
        #feedback { font-size: 1.2rem; font-weight: 700; margin-top: 15px; height: 30px; }
        .correct-anim { animation: pulse 0.5s ease; }
        .wrong-anim { animation: shake 0.5s ease; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* CERTIFICATE */
        .certificate-content { background: #fff; color: #2c145a; padding: 30px; border-radius: 15px; position: relative; }
        .rank-badge { font-size: 1.5rem; font-weight: 900; color: #d4af37; margin: 10px 0; }

        /* MOBILE OPTIMIZATION */
        @media (max-width: 480px) {
            .card { padding: 20px; }
            .site-logo { width: 50px; height: 50px; top: 10px; left: 10px; }
            .choice-btns { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <a href="index.html" class="site-logo">
        <img src="HZ-Academy.jpg" alt="Logo">
    </a>

    <div class="stars"></div>
    <img src="lantern.png" class="lantern lan-1">
    <img src="lantern.png" class="lantern lan-2">

    <div class="card" id="screen-name" style="display: block;">
        <h2 style="color: var(--primary-gold)">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù†</h2>
        <p>Ù„Ø·ÙØ§Ù‹ØŒ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ</p>
        <input type="text" id="usernameInput" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…...">
        <button class="btn btn-gold" onclick="goToStart()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
    </div>

    <div class="card" id="screen-start">
        <h1 style="margin-bottom: 10px;">ğŸŒ™ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© HZ</h1>
        <p>10 Ù†Ù‚Ø§Ø· Ù„ÙƒÙ„ Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© | 20 Ø«Ø§Ù†ÙŠØ© Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„</p>
        <br>
        <button class="btn btn-gold" onclick="startGame()">Ø¥Ø¨Ø¯Ø£ Ø§Ù„Ø³Ø¨Ø§Ù‚ Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠ</button>
    </div>

    <div class="card" id="screen-game">
        <div class="progress-container"><div id="progressBar"></div></div>
        
        <div style="display: flex; justify-content: space-between; margin-bottom: 15px; font-weight: bold;">
            <span>Ø§Ù„Ø³Ø¤Ø§Ù„: <span id="qnum">1</span></span>
            <span id="timer" style="color: var(--primary-gold)">20</span>
            <span>Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></span>
        </div>

        <h2 id="q-txt" style="min-height: 80px; display: flex; align-items: center; justify-content: center;">...</h2>

        <div class="choice-btns">
            <button class="btn btn-choice btn-true" onclick="checkAnswer(true)">ØµØ­ÙŠØ­ âœ“</button>
            <button class="btn btn-choice btn-false" onclick="checkAnswer(false)">Ø®Ø§Ø·Ø¦ âœ—</button>
        </div>
        <div id="feedback"></div>
    </div>

    <div class="card" id="screen-end">
        <div class="certificate-content">
            <h2 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">Ø´Ù‡Ø§Ø¯Ø© ØªÙ‚Ø¯ÙŠØ±</h2>
            <p style="margin-top: 15px;">ÙŠØªÙ‚Ø¯Ù… ÙØ±ÙŠÙ‚ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© HZ Ø¨ØªÙ‡Ù†Ø¦Ø©:</p>
            <h3 id="certName" style="font-size: 1.8rem; color: #c0392b;">-</h3>
            <p>Ù„Ø¥ØªÙ…Ø§Ù…Ù‡ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ© Ø¨Ù†ØªÙŠØ¬Ø©:</p>
            <div class="rank-badge" id="certRank">-</div>
            <p>Ø§Ù„Ù†Ù‚Ø§Ø·: <strong id="certScore">0</strong> | Ø§Ù„Ù†Ø³Ø¨Ø©: <strong id="certPercent">0</strong>%</p>
        </div>
        <button class="btn btn-gold" style="margin-top: 20px;" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
    </div>

    <script>
        // Ø§Ù„Ø£ØµÙˆØ§Øª
        const sounds = {
            correct: new Audio("https://cdn.pixabay.com/download/audio/2021/08/04/audio_bbd13143ef.mp3?filename=success-1-6297.mp3"),
            wrong: new Audio("https://cdn.pixabay.com/download/audio/2022/03/24/audio_7315582f3d.mp3?filename=error-126627.mp3"),
            start: new Audio("https://cdn.pixabay.com/download/audio/2022/01/18/audio_d0a13f69d2.mp3?filename=game-start-6104.mp3")
        };

        let allQuestions = [];
        let currentPos = 0;
        let score = 0;
        let username = "";
        let timeLeft = 20;
        let timerId = null;

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø´Ø§Ø´Ø§Øª
        function showScreen(id) {
            document.querySelectorAll('.card').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = 'block';
        }

        function goToStart() {
            username = document.getElementById("usernameInput").value.trim();
            if(!username) return alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ");
            showScreen('screen-start');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…Ø¹ Ø®Ù„Ø·Ù‡Ø§
        async function startGame() {
            try {
                const res = await fetch("questions.json?v=" + Date.now());
                allQuestions = await res.json();
                // Ø®Ù„Ø· Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Fisher-Yates Shuffle)
                allQuestions.sort(() => Math.random() - 0.5);
                
                sounds.start.play().catch(()=>{});
                showScreen('screen-game');
                renderQuestion();
            } catch (e) {
                alert("Ø®Ø·Ø£: ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù questions.json");
            }
        }

        function renderQuestion() {
            if (currentPos >= allQuestions.length) return endGame();

            const q = allQuestions[currentPos];
            document.getElementById("q-txt").innerText = q.q;
            document.getElementById("qnum").innerText = currentPos + 1;
            document.getElementById("feedback").innerText = "";
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
            const prog = ((currentPos) / allQuestions.length) * 100;
            document.getElementById("progressBar").style.width = prog + "%";

            resetTimer();
        }

        function resetTimer() {
            clearInterval(timerId);
            timeLeft = 20;
            document.getElementById("timer").innerText = timeLeft;
            timerId = setInterval(() => {
                timeLeft--;
                document.getElementById("timer").innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerId);
                    checkAnswer(null); // Ø§Ù„ÙˆÙ‚Øª Ø§Ù†ØªÙ‡Ù‰
                }
            }, 1000);
        }

        function checkAnswer(userChoice) {
            clearInterval(timerId);
            const correctAnswer = allQuestions[currentPos].a;
            const feedbackEl = document.getElementById("feedback");
            const gameCard = document.getElementById("screen-game");

            if (userChoice === correctAnswer) {
                score += 10;
                feedbackEl.innerText = "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ø£Ø­Ø³Ù†Øª ğŸŒŸ";
                feedbackEl.style.color = "var(--accent-green)";
                gameCard.classList.add("correct-anim");
                sounds.correct.play().catch(()=>{});
            } else {
                feedbackEl.innerText = userChoice === null ? "Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! â°" : "Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©.. Ø­Ø§ÙˆÙ„ ÙÙŠ Ø§Ù„ØªØ§Ù„ÙŠ ğŸŒ™";
                feedbackEl.style.color = "var(--accent-red)";
                gameCard.classList.add("wrong-anim");
                sounds.wrong.play().catch(()=>{});
            }

            document.getElementById("score").innerText = score;

            setTimeout(() => {
                gameCard.classList.remove("correct-anim", "wrong-anim");
                currentPos++;
                renderQuestion();
            }, 1500);
        }

        function endGame() {
            showScreen('screen-end');
            const percent = (score / (allQuestions.length * 10)) * 100;
            
            document.getElementById("certName").innerText = username;
            document.getElementById("certScore").innerText = score;
            document.getElementById("certPercent").innerText = percent.toFixed(0);

            let rank = "";
            if(percent >= 90) rank = "ğŸ† Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ø§Ù‹";
            else if(percent >= 75) rank = "ğŸŒŸ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹";
            else if(percent >= 50) rank = "ğŸ‘ Ø¬ÙŠØ¯";
            else rank = "ğŸŒ™ Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¨Ø§Ø±ÙƒØ©";
            
            document.getElementById("certRank").innerText = rank;
        }
    </script>
</body>
</html>
