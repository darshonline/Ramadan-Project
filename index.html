<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù† Ø§Ù„ÙƒØ¨Ø±Ù‰ - Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© HZ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

<style>
/* Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© */
:root {
  --primary-gold: #FFD700;
  --bg-deep: #0f0524;
  --glass-bg: rgba(255, 255, 255, 0.08);
  --success-color: #2ecc71;
  --error-color: #e74c3c;
  --white: #ffffff;
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif; }

body {
  background: radial-gradient(circle at center, #2c145a 0%, #050010 100%);
  min-height: 100vh;
  overflow-x: hidden;
  color: var(--white);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

/* Ø§Ù„Ø´Ø¹Ø§Ø± */
.site-logo {
  position: fixed; top: 20px; left: 20px; z-index: 1000;
  width: 80px; height: 80px; border-radius: 18px;
  border: 2px solid var(--primary-gold); overflow: hidden;
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
  transition: transform 0.3s ease;
}
.site-logo:hover { transform: scale(1.1); }
.site-logo img { width: 100%; height: 100%; object-fit: cover; }

/* ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø®Ù„ÙÙŠØ© */
.stars { position: fixed; inset: 0; background: url('https://www.transparenttextures.com/patterns/stardust.png'); opacity: 0.4; pointer-events: none; }
.lantern { position: fixed; width: 100px; filter: drop-shadow(0 0 10px var(--primary-gold)); animation: swing 4s ease-in-out infinite; pointer-events: none; z-index: 1; }
@keyframes swing { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(5deg) translateY(10px); } }

/* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
.card {
  background: var(--glass-bg); backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 30px; padding: 35px; width: 92%; max-width: 600px;
  text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.6);
  display: none; animation: slideUp 0.6s cubic-bezier(0.23, 1, 0.32, 1);
  margin-bottom: 80px; /* Ù…Ø³Ø§ÙØ© Ù„Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ */
}
@keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }

/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
.btn {
  background: var(--primary-gold); color: #1a0b2e;
  padding: 14px 40px; border: none; border-radius: 50px;
  font-weight: 900; cursor: pointer; transition: all 0.3s ease;
  font-size: 1.1rem; margin-top: 20px;
}
.btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(255, 215, 0, 0.4); }

.choice-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px; }
.choice-btn { padding: 20px; border-radius: 20px; border: none; color: #fff; font-size: 1.3rem; font-weight: 700; cursor: pointer; transition: 0.2s; }
.btn-correct { background: var(--success-color); }
.btn-wrong { background: var(--error-color); }

/* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ÙˆØ§Ù„Ù…Ø¤Ù‚Øª */
.progress-container { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
.progress-bar { height: 100%; background: var(--primary-gold); width: 0%; transition: width 0.4s ease; }
.timer-text { font-size: 2rem; font-weight: 900; color: var(--primary-gold); margin-bottom: 10px; }

/* Ø´Ø±ÙŠØ· Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© */
.copyright-bar {
  position: fixed; bottom: 0; left: 0; width: 100%;
  background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(10px);
  color: var(--primary-gold); text-align: center; padding: 12px 0;
  font-size: 0.95rem; font-weight: 700; border-top: 1px solid rgba(255, 215, 0, 0.3);
  z-index: 2000; letter-spacing: 1px;
}

/* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù„ */
@media (max-width: 480px) {
  .choice-btns { grid-template-columns: 1fr; }
  .card { padding: 25px; }
  .site-logo { width: 60px; height: 60px; }
}
</style>
</head>
<body>

<a href="index.html" class="site-logo">
  <img src="HZ-Academy.jpg" alt="Logo">
</a>

<div class="stars"></div>
<img src="lantern.png" class="lantern" style="right: 5%; top: 5%;">
<img src="lantern.png" class="lantern" style="left: 3%; top: 15%; width: 70px;">

<div id="screen-id" class="card" style="display: block;">
  <h2 style="color: var(--primary-gold); margin-bottom: 15px;">Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ ğŸŒ™</h2>
  <p>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØªØ­Ø¯ÙŠ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ©</p>
  <input type="text" id="playerName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§..." style="width: 100%; padding: 15px; margin: 25px 0; border-radius: 15px; border: none; text-align: center; font-size: 1.1rem; background: rgba(255,255,255,0.9);">
  <button class="btn" onclick="goToStart()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
</div>

<div id="screen-start" class="card">
  <h1 style="margin-bottom: 15px;">Ù…Ø³Ø§Ø¨Ù‚Ø© Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© HZ</h1>
  <p>Ù„Ø¯ÙŠÙƒ 20 Ø«Ø§Ù†ÙŠØ© Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„. Ù‡Ù„ Ø£Ù†Øª Ù…Ø³ØªØ¹Ø¯ØŸ</p>
  <br>
  <button class="btn" onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø¢Ù†</button>
</div>

<div id="screen-game" class="card">
  <div class="timer-text" id="timer">20</div>
  <div class="progress-container"><div class="progress-bar" id="p-bar"></div></div>
  
  <div style="display: flex; justify-content: space-between; margin-bottom: 15px; font-weight: 700;">
    <span>Ø§Ù„Ø³Ø¤Ø§Ù„: <span id="q-idx">1</span></span>
    <span>Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score-val">0</span></span>
  </div>

  <h2 id="question-box" style="min-height: 90px; line-height: 1.5;">...</h2>

  <div class="choice-btns">
    <button class="choice-btn btn-correct" onclick="check(true)">ØµØ­ÙŠØ­ âœ“</button>
    <button class="choice-btn btn-wrong" onclick="check(false)">Ø®Ø§Ø·Ø¦ âœ—</button>
  </div>
  <div id="feedback" style="margin-top: 15px; font-weight: 900; height: 25px;"></div>
</div>

<div id="screen-end" class="card">
  <div style="background: #fff; color: #1a0b2e; padding: 30px; border-radius: 20px; border: 4px double var(--primary-gold);">
    <p style="font-weight: 700;">Ø´Ù‡Ø§Ø¯Ø© Ø¥Ù†Ø¬Ø§Ø²</p>
    <h2 id="res-name" style="font-size: 1.8rem; margin: 15px 0; color: #c0392b;">-</h2>
    <p>Ø£Ù†Ù‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠ Ø¨Ù†Ø³Ø¨Ø©:</p>
    <h1 id="res-percent" style="font-size: 3rem; color: var(--success-color);">0%</h1>
    <p id="res-rank" style="font-weight: 900; margin-top: 10px;"></p>
  </div>
  <button class="btn" onclick="location.reload()">Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
</div>

<footer class="copyright-bar">
  Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© <span id="year"></span> | ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ù…Ø­Ù…Ø¯ Ù…ØµØ·ÙÙ‰
</footer>

<script>
// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ù†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
document.getElementById('year').textContent = new Date().getFullYear();

// Ø£ØµÙˆØ§Øª Ø±Ù…Ø¶Ø§Ù†ÙŠØ©
const sfx = {
  start: new Audio('https://assets.mixkit.co/active_storage/sfx/2305/2305-preview.mp3'), // ØµÙˆØª Ø¯Ù
  correct: new Audio('https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3'), // Ø±Ù†Ø© Ù†Ø¬Ø§Ø­
  wrong: new Audio('https://assets.mixkit.co/active_storage/sfx/2347/2347-preview.mp3'), // Ø±Ù†Ø© Ø®Ø·Ø£ Ù‡Ø§Ø¯Ø¦Ø©
  tick: new Audio('https://assets.mixkit.co/active_storage/sfx/2544/2544-preview.mp3') // ØªÙƒØ© Ø§Ù„Ø³Ø§Ø¹Ø©
};

let questions = [];
let currentIdx = 0;
let score = 0;
let timer = 20;
let timerInterval;

function showScreen(id) {
  document.querySelectorAll('.card').forEach(c => c.style.display = 'none');
  document.getElementById(id).style.display = 'block';
}

function goToStart() {
  if(!document.getElementById('playerName').value.trim()) return alert("Ù„Ø·ÙØ§Ù‹ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ");
  showScreen('screen-start');
}

async function startGame() {
  try {
    const res = await fetch('questions.json?v=' + Date.now());
    questions = await res.json();
    questions.sort(() => Math.random() - 0.5); // Ø®Ù„Ø· Ø¹Ø´ÙˆØ§Ø¦ÙŠ
    sfx.start.play();
    showScreen('screen-game');
    render();
  } catch (e) { alert("ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù questions.json Ø¨Ø¬Ø§Ù†Ø¨ Ø§Ù„ØµÙØ­Ø©"); }
}

function render() {
  if(currentIdx >= questions.length) return finish();
  
  const q = questions[currentIdx];
  document.getElementById('question-box').textContent = q.q;
  document.getElementById('q-idx').textContent = currentIdx + 1;
  document.getElementById('feedback').textContent = "";
  
  // Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
  document.getElementById('p-bar').style.width = ((currentIdx) / questions.length * 100) + "%";

  startTimer();
}

function startTimer() {
  timer = 20;
  document.getElementById('timer').textContent = timer;
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timer--;
    document.getElementById('timer').textContent = timer;
    if(timer <= 5) { 
      document.getElementById('timer').style.color = "red";
      sfx.tick.play();
    } else {
      document.getElementById('timer').style.color = "var(--primary-gold)";
    }
    if(timer <= 0) { clearInterval(timerInterval); check(null); }
  }, 1000);
}

function check(ans) {
  clearInterval(timerInterval);
  const correct = questions[currentIdx].a;
  const feed = document.getElementById('feedback');

  if(ans === correct) {
    score += 10;
    feed.textContent = "Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ ğŸŒ™";
    feed.style.color = var(--success-color);
    sfx.correct.play();
  } else {
    feed.textContent = ans === null ? "Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! â°" : "Ù„Ù„Ø£Ø³ÙØŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© âœ—";
    feed.style.color = var(--error-color);
    sfx.wrong.play();
  }

  document.getElementById('score-val').textContent = score;
  
  setTimeout(() => {
    currentIdx++;
    render();
  }, 1500);
}

function finish() {
  showScreen('screen-end');
  const name = document.getElementById('playerName').value;
  const percent = (score / (questions.length * 10)) * 100;
  
  document.getElementById('res-name').textContent = name;
  document.getElementById('res-percent').textContent = percent.toFixed(0) + "%";
  
  let rank = "";
  if(percent >= 90) rank = "ğŸ† Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ø§Ù‹ - Ø²Ø§Ø¯Ùƒ Ø§Ù„Ù„Ù‡ Ø¹Ù„Ù…Ø§Ù‹";
  else if(percent >= 70) rank = "ğŸŒŸ Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ - Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹";
  else if(percent >= 50) rank = "ğŸ‘ Ø¬ÙŠØ¯ - ÙˆØ§ØµÙ„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©";
  else rank = "ğŸŒ™ Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¨Ø§Ø±ÙƒØ© - Ø±Ù…Ø¶Ø§Ù† ÙØ±ØµØ© Ù„Ù„ØªØ¹Ù„Ù…";
  
  document.getElementById('res-rank').textContent = rank;
}
</script>
</body>
</html>
