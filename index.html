<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù† Ø§Ù„ÙƒØ¨Ø±Ù‰ - Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© HZ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">

<style>
/* Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„ÙˆÙ†ÙŠØ© */
:root {
  --gold: #FFD700;
  --deep-purple: #1a0b2e;
  --glass: rgba(255, 255, 255, 0.1);
  --success: #27ae60;
  --error: #c0392b;
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Cairo', sans-serif; }

body {
  background: radial-gradient(circle at center, #2c145a 0%, #050010 100%);
  min-height: 100vh;
  overflow: hidden;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Ø§Ù„Ø´Ø¹Ø§Ø± */
.site-logo {
  position: fixed; top: 15px; left: 15px; z-index: 100;
  width: 80px; height: 80px; border-radius: 15px;
  border: 2px solid var(--gold); overflow: hidden;
  transition: 0.3s;
}
.site-logo img { width: 100%; height: 100%; object-fit: cover; }

/* Ù†Ø¬ÙˆÙ… ÙˆÙÙˆØ§Ù†ÙŠØ³ */
.stars { position: fixed; inset: 0; background: url('https://www.transparenttextures.com/patterns/stardust.png'); opacity: 0.3; pointer-events: none; }
.lantern { position: fixed; width: 90px; filter: drop-shadow(0 0 10px var(--gold)); animation: swing 4s ease-in-out infinite; pointer-events: none; }
@keyframes swing { 0%, 100% { transform: rotate(-5deg) translateY(0); } 50% { transform: rotate(5deg) translateY(15px); } }

/* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
.card {
  background: var(--glass); backdrop-filter: blur(15px);
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 25px; padding: 30px; width: 90%; max-width: 600px;
  text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
  display: none; animation: fadeIn 0.6s ease;
}

/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
.btn {
  background: var(--gold); color: var(--deep-purple);
  padding: 12px 30px; border: none; border-radius: 50px;
  font-weight: 900; cursor: pointer; transition: 0.3s;
  font-size: 1.1rem; margin-top: 15px;
}
.btn:hover { transform: scale(1.05); box-shadow: 0 0 20px var(--gold); }

.choice-btns { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
.choice-btn { padding: 15px; border-radius: 15px; border: none; color: #fff; font-size: 1.2rem; cursor: pointer; transition: 0.2s; }
.btn-true { background: var(--success); }
.btn-false { background: var(--error); }

/* Ø§Ù„Ù…Ø¤Ù‚Øª */
.timer-circle {
  width: 60px; height: 60px; border: 3px solid var(--gold);
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  margin: 0 auto 15px; font-weight: 900; font-size: 1.4rem;
}

@keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body>

<a href="index.html" class="site-logo">
  <img src="HZ-Academy.jpg" alt="Logo">
</a>

<div class="stars"></div>
<img src="lantern.png" class="lantern" style="right: 5%; top: 5%;">
<img src="lantern.png" class="lantern" style="left: 5%; top: 10%;">

<div id="setup-screen" class="card" style="display: block;">
  <h1 style="color: var(--gold); margin-bottom: 10px;">ğŸŒ™ Ù…Ø³Ø§Ø¨Ù‚Ø© Ø±Ù…Ø¶Ø§Ù†</h1>
  <p>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØªØ­Ø¯ÙŠ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ©</p>
  <input type="text" id="playerName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…" style="width: 100%; padding: 12px; margin: 20px 0; border-radius: 10px; border: none; text-align: center;">
  <button class="btn" onclick="startApp()">Ø§Ø¨ØªØ¯Ø¦ Ø§Ù„Ø¨Ø±ÙƒØ©</button>
</div>

<div id="game-screen" class="card">
  <div class="timer-circle" id="timer">20</div>
  <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
    <span>Ø§Ù„Ø³Ø¤Ø§Ù„: <span id="q-count">1</span></span>
    <span>Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></span>
  </div>
  <h2 id="question-text" style="min-height: 100px;">...</h2>
  <div class="choice-btns">
    <button class="choice-btn btn-true" onclick="handleAnswer(true)">ØµØ­ÙŠØ­ âœ“</button>
    <button class="choice-btn btn-false" onclick="handleAnswer(false)">Ø®Ø§Ø·Ø¦ âœ—</button>
  </div>
</div>

<div id="end-screen" class="card">
  <h2 style="color: var(--gold)">ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ø·Ø§Ø¹ØªÙƒÙ…</h2>
  <div id="certificate" style="background: #fff; color: #333; padding: 20px; border-radius: 15px; margin: 20px 0;">
    <p>ØªØ´Ù‡Ø¯ Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© HZ Ø¨Ø£Ù†</p>
    <h3 id="final-name" style="font-size: 1.6rem; color: var(--deep-purple);"></h3>
    <p>Ù‚Ø¯ Ø£ØªÙ… Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø© Ø¨Ù†Ø³Ø¨Ø© Ù†Ø¬Ø§Ø­</p>
    <h2 id="final-percent" style="color: var(--success)"></h2>
  </div>
  <button class="btn" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ø¯ÙŠ</button>
</div>

<script>
/* Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£ØµÙˆØ§Øª Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠØ© */
const audioFiles = {
  start: new Audio('https://assets.mixkit.co/active_storage/sfx/2305/2305-preview.mp3'), // ØµÙˆØª Ø¯Ù/Ø·Ø¨Ù„Ø©
  correct: new Audio('https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3'), // Ø±Ù†Ø© Ù…Ø¨Ù‡Ø¬Ø©
  wrong: new Audio('https://assets.mixkit.co/active_storage/sfx/2347/2347-preview.mp3'), // ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ø¯Ø¦
  finish: new Audio('https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3'), // Ø§Ø­ØªÙØ§Ù„
  tick: new Audio('https://assets.mixkit.co/active_storage/sfx/2544/2544-preview.mp3') // ØµÙˆØª ØªÙƒØ© Ù„Ù„Ø³Ø§Ø¹Ø©
};

let questions = [];
let currentIdx = 0;
let score = 0;
let timeLeft = 20;
let timerInterval;

async function startApp() {
  const name = document.getElementById('playerName').value;
  if(!name) return alert("Ù„Ø·ÙØ§Ù‹ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ");
  
  try {
    const res = await fetch('questions.json');
    questions = await res.json();
    questions = questions.sort(() => Math.random() - 0.5); // Ø®Ù„Ø· Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
    
    document.getElementById('setup-screen').style.display = 'none';
    document.getElementById('game-screen').style.display = 'block';
    audioFiles.start.play();
    loadQuestion();
  } catch(e) { alert("ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù questions.json"); }
}

function loadQuestion() {
  if(currentIdx >= questions.length) return showResults();
  
  timeLeft = 20;
  document.getElementById('timer').innerText = timeLeft;
  document.getElementById('question-text').innerText = questions[currentIdx].q;
  document.getElementById('q-count').innerText = currentIdx + 1;
  
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timeLeft--;
    document.getElementById('timer').innerText = timeLeft;
    if(timeLeft <= 5) audioFiles.tick.play();
    if(timeLeft <= 0) handleAnswer(null);
  }, 1000);
}

function handleAnswer(ans) {
  clearInterval(timerInterval);
  const correct = questions[currentIdx].a;
  
  if(ans === correct) {
    score += 10;
    audioFiles.correct.play();
  } else {
    audioFiles.wrong.play();
  }
  
  document.getElementById('score').innerText = score;
  currentIdx++;
  setTimeout(loadQuestion, 1000);
}

function showResults() {
  document.getElementById('game-screen').style.display = 'none';
  document.getElementById('end-screen').style.display = 'block';
  audioFiles.finish.play();
  
  document.getElementById('final-name').innerText = document.getElementById('playerName').value;
  const percent = (score / (questions.length * 10)) * 100;
  document.getElementById('final-percent').innerText = percent.toFixed(1) + "%";
}
</script>
</body>
</html>
