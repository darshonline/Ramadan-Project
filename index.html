<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>أكاديمية HZ - مسابقة رمضان</title>

<style>
/* RESET */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    font-family: "Cairo", sans-serif;
}

/* BODY */
body {
    background: linear-gradient(135deg, #4a148c, #12002f);
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
}

/* GLASS CARD */
.game-card {
    width: 95%;
    max-width: 600px;
    padding: 30px;
    border-radius: 25px;
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255,255,255,0.3);
    box-shadow: 0 20px 50px rgba(0,0,0,0.4);
    text-align: center;
    display: none;
    animation: fadeIn 0.8s ease;
}

/* LOGO */
.logo-header {
    width: 110px;
    margin-bottom: 15px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

/* STATS */
.stats-header {
    display: flex;
    justify-content: space-between;
    background: rgba(255,255,255,0.2);
    padding: 12px;
    border-radius: 12px;
    color: white;
    font-weight: bold;
    margin-bottom: 20px;
}

/* QUESTION */
.question-box {
    min-height: 140px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.question-text {
    font-size: 1.6rem;
    color: #fff;
    font-weight: bold;
    line-height: 1.7;
}

/* ANSWER BUTTONS */
.choice-btns {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 15px;
}

.choice-btns button {
    width: 150px;
    padding: 14px;
    font-size: 1.3rem;
    border-radius: 50px;
    border: none;
    cursor: pointer;
    transition: 0.25s;
    color: white;
    font-weight: bold;
}

.btn-correct { background: #2ecc71; }
.btn-wrong { background: #e74c3c; }

.choice-btns button:hover {
    transform: scale(1.08);
}

/* FEEDBACK */
#feedback {
    height: 40px;
    margin-top: 10px;
    font-size: 1.4rem;
    font-weight: bold;
}

/* NAV BUTTONS */
.nav-grid {
    margin-top: 25px;
    display: flex;
    justify-content: center;
    gap: 15px;
}

.nav-btn {
    padding: 12px 20px;
    background: rgba(255,255,255,0.2);
    border: 2px solid #fff;
    color: white;
    border-radius: 12px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.25s;
}

.nav-btn:hover {
    background: white;
    color: #4a148c;
}

/* START & END SCREENS */
.start-screen, .end-screen {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.65);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    animation: fadeIn 0.8s ease;
}

.start-btn, .restart-btn {
    padding: 15px 35px;
    font-size: 1.4rem;
    background: #FFD700;
    color: #4a148c;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    margin-top: 20px;
    font-weight: bold;
    transition: 0.25s;
}

.start-btn:hover, .restart-btn:hover {
    transform: scale(1.1);
}

/* ADD QUESTION POPUP */
.popup {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255,255,255,0.95);
    padding: 25px;
    border-radius: 15px;
    width: 90%; max-width: 400px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    z-index: 50;
    display: none;
}

.popup input, .popup select {
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    font-size: 1rem;
    border-radius: 8px;
    border: 1px solid #ccc;
}

.popup button {
    padding: 10px 20px;
    background: #4a148c;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin-inline: 3px;
}

/* FOOTER */
.footer-bar {
    position: fixed;
    bottom: 0;
    width: 100%;
    background: rgba(255,215,0,0.15);
    padding: 10px 0;
    text-align: center;
    font-size: 1.2rem;
    font-weight: bold;
    color: #FFD700;
    letter-spacing: 3px;
    z-index: 9999;
    backdrop-filter: blur(6px);
}

/* ANIMATIONS */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>

<!-- START SCREEN -->
<div class="start-screen" id="startScreen">
    <h1 style="font-size:2.2rem;">مسابقة رمضان - أكاديمية HZ</h1>
    <button class="start-btn" onclick="startGame()">ابدأ اللعب</button>
</div>

<!-- END SCREEN -->
<div class="end-screen" id="endScreen" style="display:none;">
    <h1>انتهت المسابقة</h1>
    <h2>نقاطك: <span id="finalScore"></span></h2>
    <h3>نسبة النجاح: <span id="finalPercent"></span>%</h3>
    <button class="restart-btn" onclick="restart()">إعادة اللعب</button>
</div>

<!-- ADD QUESTION POPUP -->
<div class="popup" id="addPopup">
    <h2>إضافة سؤال جديد</h2>
    <input type="text" id="newQ" placeholder="اكتب السؤال هنا">
    <select id="newA">
        <option value="true">صحيح</option>
        <option value="false">خاطئ</option>
    </select>
    <button onclick="saveQ()">حفظ</button>
    <button onclick="closeAdd()">إلغاء</button>
</div>

<!-- MAIN GAME CARD -->
<div class="game-card" id="gameCard">

    <img src="https://play-lh.googleusercontent.com/stOVsZ7_FvO4l1IsXETqYvoTHMtU7AXhuFNxTZig6QgbrZyicpID3bXWjVTxZ-Be5nSd"
         class="logo-header">

    <div class="stats-header">
        <div>المستوى: <span id="lvl">1</span></div>
        <div>المرحلة: <span id="stg">1</span></div>
        <div>السؤال: <span id="qnum">1</span></div>
        <div>النقاط: <span id="score">0</span></div>
    </div>

    <div class="question-box">
        <div id="q-txt" class="question-text">جاري التحميل...</div>
    </div>

    <div class="choice-btns">
        <button id="ok-btn" class="btn-correct">صحيح</button>
        <button id="no-btn" class="btn-wrong">خاطئ</button>
    </div>

    <div id="feedback"></div>

    <div class="nav-grid">
        <button class="nav-btn" onclick="go(1)">السؤال التالي</button>
        <button class="nav-btn" onclick="go(-1)">السؤال السابق</button>
        <button class="nav-btn" onclick="openAdd()">إضافة سؤال</button>
    </div>

</div>

<!-- FOOTER -->
<div class="footer-bar">
    ✦ إعداد وتصميم محمد مصطفى ✦
</div>

<script>
/* SOUND EFFECTS */
const sndStart   = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_1c8d9e3b4d.mp3?filename=start-13693.mp3");
const sndPopup   = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_0e3b82466e.mp3?filename=click-124467.mp3");
const sndSave    = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_7e8e9e3b4d.mp3?filename=success-1-6297.mp3");
const sndEnd     = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_6d7f7dedf8.mp3?filename=finish-13693.mp3");

const sndCorrect = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_7e8e9e3b4d.mp3?filename=correct-2-46134.mp3");
const sndWrong   = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_6d7f7dedf8.mp3?filename=error-2-46134.mp3");
const sndNext    = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_0e3b82466e.mp3?filename=click-124467.mp3");

/* QUESTIONS */
let questions = [
    { q: "يشرع استقبال شهر رمضان بالتوبة النصوح الصادقة من جميع الذنوب.", a: true },
    { q: "من السنة الاستعداد لرمضان بالمبالغة في شراء الأطعمة والمشروبات.", a: false },
    { q: "حقيقة الصيام هي حفظ الجوارح عن الآثام وليس مجرد ترك الطعام والشراب.", a: true },
    { q: "من المخالفات الشائعة ضياع الأوقات في متابعة المسلسلات والقنوات.", a: true },
    { q: "الأفضل للمصلي في صلاة التراويح أن ينصرف قبل أن يكمل الإمام صلاته.", a: false },
    { q: "السحور سنة مؤكدة وفيه بركة عظيمة تقوي الصائم على العبادة.", a: true },
    { q: "من هدي النبي صلى الله عليه وسلم تعجيل الفطر فور ثبوت دخول الوقت.", a: true },
    { q: "يستحب استقبال شهر رمضان بالشك في دخول الشهر احتياطاً.", a: false },
    { q: "صون السمع والبصر عن المحرمات واجب على الصائم ليكون صومه حقيقياً.", a: true },
    { q: "يعتبر الانشغال بغير الطاعات في العشر الأواخر من رمضان من الحرمان.", a: true }
];

let pos = 0;
let score = 0;

/* DOM ELEMENTS */
const lvl = document.getElementById("lvl");
const stg = document.getElementById("stg");
const qnum = document.getElementById("qnum");
const qTxt = document.getElementById("q-txt");
const feedback = document.getElementById("feedback");
const scoreBox = document.getElementById("score");

document.getElementById("ok-btn").onclick = () => check(true);
document.getElementById("no-btn").onclick = () => check(false);

/* START GAME */
function startGame() {
    sndStart.play();
    document.getElementById("startScreen").style.display = "none";
    document.getElementById("gameCard").style.display = "block";
    render();
}

/* END GAME */
function endGame() {
    sndEnd.play();
    document.getElementById("gameCard").style.display = "none";
    document.getElementById("endScreen").style.display = "flex";

    document.getElementById("finalScore").textContent = score;
    document.getElementById("finalPercent").textContent =
        ((score / (questions.length * 10)) * 100).toFixed(1);
}

/* RESTART */
function restart() {
    pos = 0;
    score = 0;
    scoreBox.textContent = 0;
    document.getElementById("endScreen").style.display = "none";
    document.getElementById("gameCard").style.display = "block";
    render();
}

/* RENDER QUESTION */
function render() {
    if (pos >= questions.length) return endGame();

    const item = questions[pos];

    lvl.textContent = Math.floor(pos / 5) + 1;
    stg.textContent = Math.floor(pos / 2) + 1;
    qnum.textContent = pos + 1;

    qTxt.textContent = item.q;
    feedback.textContent = "";
}

/* CHECK ANSWER */
function check(val) {
    const correct = questions[pos].a;

    if (val === correct) {
        feedback.textContent = "إجابة صحيحة";
        feedback.style.color = "#2ecc71";
        score += 10;
        scoreBox.textContent = score;
        sndCorrect.play();
    } else {
        feedback.textContent = "إجابة خاطئة";
        feedback.style.color = "#e74c3c";
        sndWrong.play();
    }

    setTimeout(() => {
        pos++;
        sndNext.play();
        render();
    }, 900);
}

/* NAVIGATION */
function go(v) {
    pos = Math.min(Math.max(pos + v, 0), questions.length - 1);
    sndNext.play();
    render();
}

/* ADD QUESTION POPUP */
function openAdd() {
    sndPopup.play();
    document.getElementById("addPopup").style.display = "block";
}

function closeAdd() {
    sndPopup.play();
    document.getElementById("addPopup").style.display = "none";
}

function saveQ() {
    const q = document.getElementById("newQ").value.trim();
    const a = document.getElementById("newA").value === "true";

    if (q === "") {
        alert("الرجاء كتابة السؤال");
        return;
    }

    questions.push({ q, a });
    document.getElementById("newQ").value = "";
    sndSave.play();
    closeAdd();
    alert("تمت إضافة السؤال بنجاح!");
    render();
}
</script>

</body>
</html>
